# Sets the default Ruby environment to use when no specific version is specified.
{
	# Reject empty string argument, default only when argument omitted
	if [[ $# -gt 0 && -z "$1" ]]; then
		return 1
	fi
	local choice="${1:-system}"

	# For non-system rubies, verify they exist in rubies array first
	if [[ "$choice" != "system" ]] && [[ -z ${(M)rubies:#*$choice} ]]; then
		print "That ruby is not available\n\n"
		czruby
		return 1
	fi

	# Check if config file exists
	if [[ ! -f "$czruby_datadir/${choice}" ]]; then
		printf "That ruby has not been set up, please run czruby_setup\n\n"
		return 1
	fi

	RUBIES_DEFAULT="$choice"
	ln -fs "$czruby_datadir/${RUBIES_DEFAULT}" "$czruby_datadir/default"

	czruby_reset "$choice"
}


