# Sets up an array to store the paths of the different Ruby versions.
export -TU RUBIES rubies

# Sets up an array to store the paths for the Gems associated with different Ruby versions.
export -TU GEM_PATH gem_path

# Defines the directory to store configuration files for different Ruby versions.
czruby_datadir="$XDG_DATA_HOME/czruby"

# Ensures a default Ruby is set if none has been previously defined.
if [[ -z "$RUBIES_DEFAULT" ]]; then
	export RUBIES_DEFAULT="system"
fi

# Portable realpath - use grealpath on macOS, realpath on Linux
czruby_realpath() {
	if command -v grealpath > /dev/null 2>&1; then
		grealpath "$@"
	elif command -v realpath > /dev/null 2>&1; then
		realpath "$@"
	elif command -v greadlink > /dev/null 2>&1; then
		greadlink -f "$@"
	elif command -v ruby > /dev/null 2>&1; then
		# Ruby fallback - resolves symlinks like realpath
		ruby -e "puts File.realpath(ARGV[0])" "$1"
	else
		readlink -f "$@"
	fi
}

